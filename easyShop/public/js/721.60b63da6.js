"use strict";(self["webpackChunkeasyshop_h5"]=self["webpackChunkeasyshop_h5"]||[]).push([[721],{7721:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});s(7658);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cartContext"},[e("van-nav-bar",{attrs:{title:"购物车",placeholder:"",fixed:""}}),t.cartList.length>0?e("div",{staticClass:"goodsList"},t._l(t.cartList,(function(s){return e("van-swipe-cell",{key:s.skuId,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.delCarts(s.skuId)}}})]},proxy:!0}],null,!0)},[e("van-card",{staticClass:"goods-card",attrs:{num:s.count,price:s.price,title:s.name,desc:s.attrsText},scopedSlots:t._u([{key:"thumb",fn:function(){return[e("div",{staticStyle:{display:"flex"}},[e("van-checkbox",{on:{change:e=>t.onCheckChange(e,s.skuId,s.count)},model:{value:s.selected,callback:function(e){t.$set(s,"selected",e)},expression:"item.selected"}}),e("van-image",{staticClass:"cartImages",staticStyle:{"margin-left":"10px"},attrs:{fit:"cover",src:s.picture},on:{click:function(e){return t.$router.push(`/goods?id=${s.id}`)}}})],1)]},proxy:!0},{key:"num",fn:function(){return[e("van-stepper",{on:{change:e=>t.onChange(e,s.skuId,s.selected)},model:{value:s.count,callback:function(e){t.$set(s,"count",e)},expression:"item.count"}})]},proxy:!0}],null,!0)})],1)})),1):t.noneToken?t._e():e("div",{staticClass:"notGoodsList"},[e("van-empty",{staticClass:"custom-image",attrs:{image:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.xabanjan.com%2Ftemplates%2Fshop%2F186%2Fimages%2Fnone.png&refer=http%3A%2F%2Fwww.xabanjan.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1668176201&t=ccadaa10333db2d786588bd14f2d1f45",description:"去添加点什么吧"}})],1),t.noneToken?e("div",{staticClass:"notLogin"},[e("van-empty",{attrs:{image:"error",description:"您还未登录"}},[e("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:function(e){return t.$router.push("/login?from=/cart")}}},[t._v("去登陆")])],1)],1):t._e(),t.noneToken?t._e():e("footer",[e("van-submit-bar",{attrs:{price:t.price,"button-text":"提交订单"},on:{submit:t.onSubmit}},[e("van-checkbox",{model:{value:t.allCheck,callback:function(e){t.allCheck=e},expression:"allCheck"}},[t._v("全选")])],1)],1)],1)},c=[],a=s(6624),r={name:"easy-cart",data(){return{checked:!1,noneToken:!1,cartList:[]}},methods:{async onCheckChange(t,e,s){await(0,a.I9)({id:e,count:s,selected:t})},async onChange(t,e,s){await(0,a.I9)({id:e,count:t,selected:s})},onSubmit(){let t=this.cartList.filter((t=>t.selected)),e=[],s={};for(let n=0;n<t.length;n++){let c=t[n];if(s[c.id])for(let t=0;t<e.length;t++){let s=e[t];if(s.id===c.id){s.specs.push({skuId:c.skuId,price:100*(c.price+0),desc:c.attrsText,count:c.count,picture:c.picture});break}}else e.push({id:c.id,name:c.name,specs:[{skuId:c.skuId,price:100*(c.price+0),desc:c.attrsText,count:c.count,picture:c.picture}]}),s[c.id]=c}this.$store.commit("goods/setGoodsList",e),this.$router.push("/place")},async getCartList(){const t=await(0,a.dv)();this.cartList=t.result.valids},async delCarts(t){await(0,a.ZL)({ids:[`${t}`],clearAll:!1,clearInvalid:!1}),this.getCartList()}},created(){this.$store.state.user.profile.token?this.getCartList():this.noneToken=!0},computed:{allCheck:{get(){let t=this.cartList.filter((t=>t.selected));return t.length===this.cartList.length},set(t){this.cartList.forEach((e=>{e.selected=t}))}},price(){let t=0,e=this.cartList.filter((t=>t.selected));return e.forEach((e=>{t+=e.price*e.count*100})),t}}},i=r,o=s(1001),u=(0,o.Z)(i,n,c,!1,null,"753088f1",null),l=u.exports},6624:function(t,e,s){s.d(e,{I9:function(){return i},Z5:function(){return a},ZL:function(){return r},dv:function(){return c}});var n=s(435);const c=()=>(0,n.Z)("/member/cart/mutli","get"),a=t=>(0,n.Z)("/member/cart","post",{...t}),r=t=>(0,n.Z)("/member/cart","DELETE",{...t}),i=t=>(0,n.Z)(`/member/cart/${t.id}`,"put",{selected:t.selected,count:t.count})}}]);
//# sourceMappingURL=721.60b63da6.js.map
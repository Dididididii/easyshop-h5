"use strict";(self["webpackChunkeasyshop_h5"]=self["webpackChunkeasyshop_h5"]||[]).push([[778],{9778:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});r(7658);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"context"},[t("van-nav-bar",{attrs:{title:`剩${e.time}自动关闭订单`,"left-arrow":""},on:{"click-left":function(t){return e.$router.push("/")}}}),t("div",{staticClass:"box"},[t("van-address-list",{attrs:{list:e.list},model:{value:e.chosenAddressId,callback:function(t){e.chosenAddressId=t},expression:"chosenAddressId"}}),e._l(e.orderList.skus,(function(e){return t("div",{key:e.id,staticClass:"goodsCard"},[t("van-card",{attrs:{num:e.quantity,price:e.realPay,desc:e.attrsText,title:e.name,thumb:e.image}})],1)})),t("van-cell-group",{staticClass:"pirce"},[t("van-cell",{attrs:{title:"总价格",value:e.orderList.totalMoney}})],1)],2),t("footer",[t("div",{staticClass:"footerBox"},[t("div",{on:{click:e.delOrder}},[e._v("取消订单")]),t("div",[e._v("找朋友代付")]),t("div",{on:{click:e.payOrder}},[e._v("付款")])])])],1)},a=[],n=r(596),i={name:"easy-Pay",data(){return{orderList:{},time:"",timer:null,chosenAddressId:"1",list:[]}},methods:{payOrder(){const e="https://apipc-xiaotuxian-front.itheima.net/",t=encodeURIComponent("http://localhost:8080/pay/callback"),r=`${e}pay/aliPay?orderId=${this.$route.query.orderId}&redirect=${t}`;window.open(r,"_blank")},async delOrder(){await(0,n.qH)(this.$route.query.orderId,"不想要了"),this.$toast("订单取消成功"),this.$router.push("/")},async getOderList(){const e=await(0,n.co)(this.$route.query.orderId);this.orderList=e.result,console.log(this.orderList),this.list.push({id:"1",name:e.result.receiverContact,tel:e.result.receiverMobile,address:e.result.provinceCode+e.result.cityCode+e.result.countyCode+e.result.receiverAddress,isDefault:!0})},countDown(e){var t=+new Date,r=+new Date(e),s=(r-t)/1e3,a=parseInt(s/60%60);a=a<10?"0"+a:a;var n=parseInt(s%60);return n=n<10?"0"+n:n,`${a}分${n}秒`}},async created(){await this.getOderList(),this.timer=setInterval((()=>{let e=Date.parse(new Date(this.orderList.payLatestTime));this.time=this.countDown(e),Date.parse(new Date)>e&&(clearInterval(this.timer),this.$toast("订单未完成支付，订单关闭"),this.$router.push("/"))}),1e3)}},o=i,c=r(1001),d=(0,c.Z)(o,s,a,!1,null,"baace8d0",null),l=d.exports},596:function(e,t,r){r.d(t,{HT:function(){return a},Zl:function(){return c},co:function(){return n},qH:function(){return i},r2:function(){return d},y:function(){return o}});var s=r(435);const a=e=>(0,s.Z)("/member/order","post",{...e}),n=e=>(0,s.Z)(`/member/order/${e}`,"GET"),i=(e,t="不想要了")=>(0,s.Z)(`/member/order/${e}/cancel`,"PUT",{cancelReason:t}),o=e=>(0,s.Z)("/member/order","get",{...e}),c=e=>(0,s.Z)(`/member/order/${e}/logistics`,"get"),d=e=>(0,s.Z)(`/member/order/${e}/receipt`,"put")}}]);
//# sourceMappingURL=778.ecd10521.js.map